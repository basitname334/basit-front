import { createContext, useContext, useEffect, useMemo, useState } from 'react'

const dictionaries = {
  en: {
    brand: 'Hassan Cook Chinese Food Specialist',
    signInTitle: 'Sign in to your account',
    signIn: 'Sign In',
    signingIn: 'Signing in...',
    email: 'Email Address',
    password: 'Password',
    testCredentials: 'Test Credentials',
    error: 'Error',
    success: 'Success',
    adminDashboard: 'Admin Dashboard',
    adminSubtitle: 'Manage ingredients and create dishes for Hassan Cook Chinese Food Specialist',
    manageIngredients: 'Manage Ingredients',
    addIngredient: 'Add Ingredient',
    availableIngredients: 'Available Ingredients',
    ingredientName: 'Ingredient name',
    ingredientNamePlaceholder: 'Ingredient name (e.g., Flour, Tomatoes)',
    unitPlaceholder: 'Unit (e.g., kg, g, litre)',
    howToUseIngredients: 'How to use:',
    howToUseIngredientsDesc: 'Enter an ingredient name (e.g., "Flour", "Tomatoes") and its category (e.g., "Grains", "Vegetables", "Spices"). Click "Add Ingredient" to save it to your database.',
    noIngredientsYet: 'No ingredients added yet. Add your first ingredient above to get started!',
    delete: 'Delete',
    createDish: 'Create Dish',
    defineDishes: 'Define new dishes with their base quantities and required ingredients',
    availableIngredientsToChoose: 'Available Ingredients to Choose From:',
    addIngredientsFirst: 'Please add ingredients first in the Manage Ingredients section above before creating a dish.',
    dishName: 'Dish Name',
    dishNamePlaceholder: 'Enter dish name (e.g., Pizza Margherita)',
    baseQuantity: 'Base Quantity',
    baseQuantityPlaceholder: 'e.g., 1',
    baseQuantityDesc: 'Reference quantity for scaling',
    baseUnit: 'Base Unit',
    baseUnitPlaceholder: 'e.g., kg, portion, serving',
    baseUnitDesc: 'Unit of measurement for the base quantity',
    pricePerBase: 'Price per Base (optional)',
    pricePerBasePlaceholder: 'e.g., 999.99 (PKR)',
    pricePerBaseDesc: 'Revenue in PKR for each base quantity',
    costPerBase: 'Cost per Base (optional)',
    costPerBasePlaceholder: 'e.g., 450.00 (PKR)',
    costPerBaseDesc: 'Estimated cost in PKR to produce each base quantity',
    addIngredientToDish: 'Add Ingredient to Dish',
    addIngredientsFirst: 'Please add ingredients first before adding them to a dish.',
    noIngredientsAddedToDish: 'No ingredients added to this dish yet. Click "Add Ingredient to Dish" above to start building your recipe.',
    dishIngredients: 'Dish Ingredients',
    selectIngredient: 'Select ingredient...',
    amountPerBase: 'Amount per Base',
    amountPerBasePlaceholder: 'e.g., 0.5',
    createDishButton: 'Create Dish',
    allDishes: 'All Dishes',
    viewAndManage: 'View and manage all created dishes',
    noDishesYet: 'No dishes created yet',
    createFirstDish: 'Create your first dish using the form above',
    ingredients: 'Ingredients:',
    perBase: 'per base',
    noIngredients: 'No ingredients',
    newOrder: 'Place New Order',
    newOrderSubtitle: 'Select a dish and quantity to place your order',
    fillForm: 'Fill in the form below to place your order',
    howToPlaceOrder: 'How to place an order:',
    howToPlaceOrder1: 'Select a dish from the dropdown menu',
    howToPlaceOrder2: 'Enter the quantity you want to order',
    howToPlaceOrder3: 'The unit is automatically set based on the dish\'s base unit',
    howToPlaceOrder4: 'Review the ingredient preview to see what will be needed',
    howToPlaceOrder5: 'Click "Place Order" to complete your order',
    selectDish: 'Select Dish',
    noDishesAvailable: 'No dishes available',
    askAdminToCreate: 'No dishes available. Please ask an admin to create dishes first.',
    quantity: 'Quantity',
    quantityPlaceholder: 'Enter quantity',
    quantityDesc: 'Enter the desired quantity',
    unitAutoSet: 'Unit is automatically set by the dish\'s base unit',
    scalingInformation: 'Scaling Information',
    baseQuantityLabel: 'Base Quantity:',
    requestedQuantity: 'Requested Quantity:',
    scaleFactor: 'Scale Factor:',
    allIngredientsScaled: 'All ingredient amounts will be scaled proportionally based on this factor.',
    ingredientPreview: 'Ingredient Preview',
    ingredientsNeeded: 'These are the ingredients that will be needed for your order:',
    ingredient: 'Ingredient',
    amountRequired: 'Amount Required',
    placeOrderButton: 'Place Order',
    placingOrder: 'Placing Order...',
    viewOrdersButton: 'View Orders',
    availableDishes: 'Available Dishes',
    ingredientsInSelectedDish: 'Ingredients in Selected Dish',
    currentScaleFactor: 'Current Scale Factor',
    orders: 'Orders',
    orderHistory: 'Order History',
    viewAllOrders: 'View all your orders and print slips',
    allOrders: 'All Orders',
    manageAndView: 'Manage and view order details',
    loadingOrders: 'Loading orders...',
    noOrdersYet: 'No orders yet',
    placeFirstOrder: 'Place your first order to see it here',
    tips: 'Tips:',
    tip1: 'Click "Ingredient Slip" to view and print the list of ingredients needed for the order',
    tip2: 'Click "Order Slip" to view and print the order details',
    tip3: 'Orders are sorted by most recent first',
    orderNumber: 'Order #',
    dish: 'Dish',
    dateTime: 'Date & Time',
    actions: 'Actions',
    reports: 'Reports',
    financialReports: 'Financial Reports',
    trackOrders: 'Track orders, revenue, cost, and profit',
    overview: 'Overview',
    aggregateMetrics: 'Aggregate metrics by time period',
    daily: 'Daily',
    monthly: 'Monthly',
    yearly: 'Yearly',
    loadingReport: 'Loading report...',
    revenue: 'Revenue',
    cost: 'Cost',
    profit: 'Profit',
    ordersCount: 'Orders',
    period: 'Period',
    admin: 'Dashboard',
    dashboard: 'Make Order',
    logout: 'Logout',
    language: 'Language',
    english: 'English',
    urdu: 'اردو',
    required: 'required',
    pleaseSelectDish: 'Please select a dish',
    pleaseEnterValidQuantity: 'Please enter a valid quantity greater than 0',
    orderPlacedSuccess: 'Order #{{id}} placed successfully!',
    orderPlacedFailed: 'Failed to place order',
    networkError: 'Network error. Please try again.',
    pleaseFillAllFields: 'Please fill in all dish fields',
    pleaseAddIngredient: 'Please add at least one ingredient to the dish',
    pleaseFillIngredientFields: 'Please fill in all fields for each ingredient',
    ingredientAdded: 'Ingredient added successfully!',
    ingredientDeleted: 'Ingredient deleted successfully!',
    dishCreated: 'Dish created successfully!',
    dishDeleted: 'Dish deleted successfully!',
    failedToAdd: 'Failed to add ingredient',
    failedToDelete: 'Failed to delete ingredient',
    failedToCreate: 'Failed to create dish',
    failedToDeleteDish: 'Failed to delete dish',
    sureDeleteIngredient: 'Are you sure you want to delete this ingredient?',
    sureDeleteDish: 'Are you sure you want to delete this dish?',
    singleIngredient: 'ingredient',
    multipleIngredients: 'ingredients',
    singleOrder: 'order',
    multipleOrders: 'orders',
    singleDish: 'dish',
    multipleDishes: 'dishes',
    backToOrders: 'Back to Orders',
    print: 'Print',
    loading: 'Loading...',
    failedToLoad: 'Failed to load',
    requiredIngredients: 'Required Ingredients',
    amount: 'Amount',
    orderDateTime: 'Order Date & Time',
    generatedOn: 'Generated on',
  },
  ur: {
    brand: 'حسن کُک چائنیز فوڈ اسپیشلسٹ',
    signInTitle: 'اپنے اکاؤنٹ میں سائن ان کریں',
    signIn: 'سائن ان',
    signingIn: 'سائن ان ہو رہا ہے...',
    email: 'ای میل',
    password: 'پاس ورڈ',
    testCredentials: 'ٹیسٹ کریڈینشلز',
    error: 'خرابی',
    success: 'کامیابی',
    adminDashboard: 'ایڈمن ڈیش بورڈ',
    adminSubtitle: 'حسن کُک چائنیز فوڈ اسپیشلسٹ کے لیے اجزاء اور ڈشز کا انتظام کریں',
    manageIngredients: 'اجزاء کا انتظام',
    addIngredient: 'اجزاء شامل کریں',
    availableIngredients: 'دستیاب اجزاء',
    ingredientName: 'جزو کا نام',
    ingredientNamePlaceholder: 'جزو کا نام (مثلاً آٹا، ٹماٹر)',
    unitPlaceholder: 'یونٹ (مثلاً کلو، گرام، لیٹر)',
    howToUseIngredients: 'کیسے استعمال کریں:',
    howToUseIngredientsDesc: 'جزو کا نام (مثلاً "آٹا"، "ٹماٹر") اور اس کی قسم (مثلاً "غلات"، "سبزیاں"، "مصالحے") درج کریں۔ "اجزاء شامل کریں" پر کلک کریں تاکہ یہ آپ کے ڈیٹا بیس میں محفوظ ہو جائے۔',
    noIngredientsYet: 'ابھی تک کوئی اجزاء شامل نہیں کیے گئے۔ شروع کرنے کے لیے اوپر اپنا پہلا جزو شامل کریں!',
    delete: 'حذف کریں',
    createDish: 'ڈش بنائیں',
    defineDishes: 'نئی ڈشز بنائیں ان کی بنیادی مقدار اور ضروری اجزاء کے ساتھ',
    availableIngredientsToChoose: 'منتخب کرنے کے لیے دستیاب اجزاء:',
    addIngredientsFirst: 'براہ کرم ڈش بنانے سے پہلے اوپر اجزاء کے انتظام والے حصے میں پہلے اجزاء شامل کریں۔',
    dishName: 'ڈش کا نام',
    dishNamePlaceholder: 'ڈش کا نام درج کریں (مثلاً پیزا مارگیریٹا)',
    baseQuantity: 'بنیادی مقدار',
    baseQuantityPlaceholder: 'مثلاً 1',
    baseQuantityDesc: 'سکیلنگ کے لیے حوالہ مقدار',
    baseUnit: 'بنیادی یونٹ',
    baseUnitPlaceholder: 'مثلاً کلو، حصہ، سروینگ',
    baseUnitDesc: 'بنیادی مقدار کے لیے پیمائش کا یونٹ',
    pricePerBase: 'فی بنیاد قیمت (اختیاری)',
    pricePerBasePlaceholder: 'مثلاً 999.99 (پاکستانی روپیہ)',
    pricePerBaseDesc: 'فی بنیادی مقدار آمدنی پاکستانی روپیہ میں',
    costPerBase: 'فی بنیاد لاگت (اختیاری)',
    costPerBasePlaceholder: 'مثلاً 450.00 (پاکستانی روپیہ)',
    costPerBaseDesc: 'فی بنیادی مقدار پیدا کرنے کی تخمینی لاگت پاکستانی روپیہ میں',
    addIngredientToDish: 'ڈش میں جزو شامل کریں',
    addIngredientsFirst: 'براہ کرم ڈش میں شامل کرنے سے پہلے پہلے اجزاء شامل کریں۔',
    noIngredientsAddedToDish: 'ابھی تک اس ڈش میں کوئی اجزاء شامل نہیں کیے گئے۔ اپنی ترکیب بنانا شروع کرنے کے لیے اوپر "ڈش میں جزو شامل کریں" پر کلک کریں۔',
    dishIngredients: 'ڈش کے اجزاء',
    selectIngredient: 'جزو منتخب کریں...',
    amountPerBase: 'فی بنیاد مقدار',
    amountPerBasePlaceholder: 'مثلاً 0.5',
    createDishButton: 'ڈش بنائیں',
    allDishes: 'تمام ڈشز',
    viewAndManage: 'تمام بنائی گئی ڈشز دیکھیں اور ان کا انتظام کریں',
    noDishesYet: 'ابھی تک کوئی ڈشز نہیں بنائی گئیں',
    createFirstDish: 'اوپر دیے گئے فارم کا استعمال کرتے ہوئے اپنی پہلی ڈش بنائیں',
    ingredients: 'اجزاء:',
    perBase: 'فی بنیاد',
    noIngredients: 'کوئی اجزاء نہیں',
    newOrder: 'نیا آرڈر بنائیں',
    newOrderSubtitle: 'آرڈر کرنے کے لیے ڈش اور مقدار منتخب کریں',
    fillForm: 'اپنا آرڈر کرنے کے لیے نیچے دیا گیا فارم بھریں',
    howToPlaceOrder: 'آرڈر کیسے کریں:',
    howToPlaceOrder1: 'ڈراپ ڈاؤن مینیو سے ڈش منتخب کریں',
    howToPlaceOrder2: 'آپ جو مقدار آرڈر کرنا چاہتے ہیں وہ درج کریں',
    howToPlaceOrder3: 'یونٹ خود بخود ڈش کے بنیادی یونٹ کی بنیاد پر سیٹ ہو جاتا ہے',
    howToPlaceOrder4: 'اجزاء کا جائزہ دیکھیں تاکہ آپ دیکھ سکیں کہ کیا ضروری ہوگا',
    howToPlaceOrder5: 'اپنا آرڈر مکمل کرنے کے لیے "آرڈر کریں" پر کلک کریں',
    selectDish: 'ڈش منتخب کریں',
    noDishesAvailable: 'کوئی ڈشز دستیاب نہیں',
    askAdminToCreate: 'کوئی ڈشز دستیاب نہیں۔ براہ کرم پہلے ایڈمن سے کہیں کہ ڈشز بنائیں۔',
    quantity: 'مقدار',
    quantityPlaceholder: 'مقدار درج کریں',
    quantityDesc: 'مطلوبہ مقدار درج کریں',
    unitAutoSet: 'یونٹ خود بخود ڈش کے بنیادی یونٹ کی بنیاد پر سیٹ کیا جاتا ہے',
    scalingInformation: 'سکیلنگ کی معلومات',
    baseQuantityLabel: 'بنیادی مقدار:',
    requestedQuantity: 'درخواست کردہ مقدار:',
    scaleFactor: 'سکیل فیکٹر:',
    allIngredientsScaled: 'تمام اجزاء کی مقداریں اس فیکٹر کی بنیاد پر متناسب طور پر سکیل کی جائیں گی۔',
    ingredientPreview: 'اجزاء کا جائزہ',
    ingredientsNeeded: 'یہ وہ اجزاء ہیں جو آپ کے آرڈر کے لیے ضروری ہوں گے:',
    ingredient: 'جزو',
    amountRequired: 'ضروری مقدار',
    placeOrderButton: 'آرڈر کریں',
    placingOrder: 'آرڈر ہو رہا ہے...',
    viewOrdersButton: 'آرڈرز دیکھیں',
    availableDishes: 'دستیاب ڈشز',
    ingredientsInSelectedDish: 'منتخب کردہ ڈش میں اجزاء',
    currentScaleFactor: 'موجودہ سکیل فیکٹر',
    orders: 'آرڈرز',
    orderHistory: 'آرڈر ہسٹری',
    viewAllOrders: 'اپنے تمام آرڈرز دیکھیں اور پرچیاں پرنٹ کریں',
    allOrders: 'تمام آرڈرز',
    manageAndView: 'آرڈر کی تفصیلات دیکھیں اور ان کا انتظام کریں',
    loadingOrders: 'آرڈرز لوڈ ہو رہے ہیں...',
    noOrdersYet: 'ابھی تک کوئی آرڈرز نہیں',
    placeFirstOrder: 'اپنا پہلا آرڈر کریں تاکہ یہ یہاں نظر آئے',
    tips: 'نکات:',
    tip1: 'آرڈر کے لیے ضروری اجزاء کی فہرست دیکھنے اور پرنٹ کرنے کے لیے "اجزاء کی پرچی" پر کلک کریں',
    tip2: 'آرڈر کی تفصیلات دیکھنے اور پرنٹ کرنے کے لیے "آرڈر پرچی" پر کلک کریں',
    tip3: 'آرڈرز تازہ ترین کے مطابق ترتیب دیے گئے ہیں',
    orderNumber: 'آرڈر #',
    dish: 'ڈش',
    dateTime: 'تاریخ اور وقت',
    actions: 'اعمال',
    reports: 'رپورٹس',
    financialReports: 'مالیاتی رپورٹس',
    trackOrders: 'آرڈرز، آمدنی، لاگت اور منافع کو ٹریک کریں',
    overview: 'جائزہ',
    aggregateMetrics: 'وقت کی مدت کے لحاظ سے مجموعی میٹرکس',
    daily: 'روزانہ',
    monthly: 'ماہانہ',
    yearly: 'سالانہ',
    loadingReport: 'رپورٹ لوڈ ہو رہی ہے...',
    revenue: 'آمدنی',
    cost: 'لاگت',
    profit: 'منافع',
    ordersCount: 'آرڈرز',
    period: 'مدت',
    admin: 'ڈیش بورڈ',
    dashboard: 'آرڈر بنائیں',
    logout: 'لاگ آؤٹ',
    language: 'زبان',
    english: 'انگریزی',
    urdu: 'اردو',
    required: 'ضروری',
    pleaseSelectDish: 'براہ کرم ڈش منتخب کریں',
    pleaseEnterValidQuantity: 'براہ کرم 0 سے زیادہ درست مقدار درج کریں',
    orderPlacedSuccess: 'آرڈر #{{id}} کامیابی سے کیا گیا!',
    orderPlacedFailed: 'آرڈر کرنے میں ناکام',
    networkError: 'نیٹ ورک کی خرابی۔ براہ کرم دوبارہ کوشش کریں۔',
    pleaseFillAllFields: 'براہ کرم تمام ڈش فیلڈز بھریں',
    pleaseAddIngredient: 'براہ کرم ڈش میں کم از کم ایک جزو شامل کریں',
    pleaseFillIngredientFields: 'براہ کرم ہر جزو کے لیے تمام فیلڈز بھریں',
    ingredientAdded: 'جزو کامیابی سے شامل کیا گیا!',
    ingredientDeleted: 'جزو کامیابی سے حذف کیا گیا!',
    dishCreated: 'ڈش کامیابی سے بنائی گئی!',
    dishDeleted: 'ڈش کامیابی سے حذف کی گئی!',
    failedToAdd: 'جزو شامل کرنے میں ناکام',
    failedToDelete: 'جزو حذف کرنے میں ناکام',
    failedToCreate: 'ڈش بنانے میں ناکام',
    failedToDeleteDish: 'ڈش حذف کرنے میں ناکام',
    sureDeleteIngredient: 'کیا آپ واقعی اس جزو کو حذف کرنا چاہتے ہیں؟',
    sureDeleteDish: 'کیا آپ واقعی اس ڈش کو حذف کرنا چاہتے ہیں؟',
    singleIngredient: 'جزو',
    multipleIngredients: 'اجزاء',
    singleOrder: 'آرڈر',
    multipleOrders: 'آرڈرز',
    singleDish: 'ڈش',
    multipleDishes: 'ڈشز',
    backToOrders: 'آرڈرز میں واپس',
    print: 'پرنٹ',
    loading: 'لوڈ ہو رہا ہے...',
    failedToLoad: 'لوڈ کرنے میں ناکام',
    requiredIngredients: 'ضروری اجزاء',
    amount: 'مقدار',
    orderNumber: 'آرڈر #',
    dishName: 'ڈش کا نام',
    orderDateTime: 'آرڈر کی تاریخ اور وقت',
    generatedOn: 'بنایا گیا',
  }
}

const I18nContext = createContext({ lang: 'en', setLang: () => {}, t: (k) => k })

export function I18nProvider({ children }) {
  const [lang, setLangState] = useState('en')
  useEffect(() => {
    const saved = localStorage.getItem('lang')
    if (saved) setLangState(saved)
  }, [])
  const setLang = (l) => { setLangState(l); localStorage.setItem('lang', l) }
  const t = useMemo(() => (key, params = {}) => {
    const dict = dictionaries[lang] || dictionaries.en
    let text = dict[key] || key
    Object.keys(params).forEach(k => {
      text = text.replace(`{{${k}}}`, params[k])
    })
    return text
  }, [lang])
  const value = useMemo(() => ({ lang, setLang, t }), [lang, t])
  return <I18nContext.Provider value={value}>{children}</I18nContext.Provider>
}

export function useI18n() { return useContext(I18nContext) }
